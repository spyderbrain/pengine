<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Pengine Scratchpad</title>
        <meta name="description" content="">
        <meta name="author" content="Torbjörn Lager">
        <!-- CSS -->
        <link rel="stylesheet" href="/vendor/bootstrap3/css/bootstrap.min.css">
        <link rel="stylesheet" href="/apps/scratchpad/css/scratchpad.css">
        <link rel="shortcut icon" href="/favicon.ico">
    </head>
    <body>
            <header class="navbar navbar-default navbar-fixed-top">
                <div class="container pull-left">
                    <div class="navbar-header">
                        <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        </button>
                        <a href="/docs/index.html" style="font-size:20px;color:darkblue;line-height:15px;margin:4px 0 0 0;padding:6px 0 0 0" class="navbar-brand">
                            Pengine<br /><span style="padding:0px;margin:0;font-size:11px;line-height:0;">&nbsp;&nbsp;&nbsp;&nbsp;SCRATCHPAD</span>
                        </a>
                    </div>
                    <nav class="collapse navbar-collapse bs-navbar-collapse pull-left">
                        <ul class="nav navbar-nav">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">File<b class="caret"></b></a>
                                <ul id="file-menu" class="dropdown-menu">
                                    <li><a id="prefs">Preferences...</a></li>
                                    <li class="divider"></li>
                                    <li><a id="print">Print...</a></li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Edit<b class="caret"></b></a>
                                <ul id="edit-menu" class="dropdown-menu">
                                    <li><a id="undo">Undo</a></li>
                                    <li><a id="redo">Redo</a></li>
                                    <li class="divider"></li>
                                    <li><a id="indent">Indent</a></li>
                                    <li><a id="outdent">Outdent</a></li>
                                    <li class="divider"></li>
                                    <li><a id="comment">Toggle comment</a></li>
                                    <li class="divider"></li>
                                    <li><a id="find">Find and replace...</a></li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Examples<b class="caret"></b></a>
                                <ul id="example-menu" class="dropdown-menu">
                                    <li><a href="/examples/hello_world.html">Hello World!</a></li>
                                    <li><a href="/examples/queens.html">Queens</a></li>
                                    <li><a href="/examples/prolog.html">Web Prolog</a></li>
                                    <li><a href="/examples/templating.html">Templating</a></li>
                                    <li><a href="/apps/swish/index.html">SWISH</a></li>
                                    <li><a href="/apps/scratchpad/index.html">Scratchpad</a></li>                                    
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Help<b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li><a href="#about" data-toggle="modal">About...</a></li>
                                    <li class="divider"></li>
                                    <li><a href="#help" data-toggle="modal">Help...</a></li>
                                </ul>
                            </li>
                        </ul>
                        <button id="run-btn" class="btn btn-primary pull-left">Run</button>
                        <button id="save-btn" class="btn btn-default pull-left" disabled>Save</button>
                        <button id="update-btn" class="btn btn-default hide pull-left" disabled>Update</button>
                        <button id="share-btn" class="btn btn-default navbar-btn hide pull-left">Share</button>
                    </nav>
                </div>
            </header>
        <div id="preferences" class="modal fade" tabindex="-1">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">×</button>
                        <h4 id="myModalLabel">Preferences</h4>
                    </div>
                    <div class="modal-body">
                        <form class="form-horizontal">
                          <legend>General</legend>
                          <div class="form-group">
                              <label class="col-lg-3 control-label" for="theme-menu">Theme </label>
                              <select id="theme-menu" class="input-sm preference-menu">
                                  <option value="chrome">chrome</option>
                                  <option value="clouds">clouds</option>
                                  <option value="dawn">dawn</option>
                                  <option value="dreamweaver">dreamweaver</option>
                                  <option value="eclipse">eclipse</option>
                                  <option value="github">github</option>
                                  <option selected value="textmate">textmate</option>
                                  <option value="tomorrow">tomorrow</option>
                                  <option value="xcode">xcode</option>
                              </select>
                          </div>
                          <legend>Editor</legend>
                          <div class="form-group">
                              <label class="col-lg-3 control-label" for="font-family-menu">Font family </label>
                              <select id="font-family-menu" class="input-sm preference-menu">
                                  <option value="'andale mono',monospace">Andale Mono</option>
                                  <option value="consolas,monospace">Consolas</option>
                                  <option selected value="'courier new',monospace">Courier New</option>
                                  <option value="courier,monospace">Courier</option>
                                  <option value="monaco,monospace">Monaco</option>
                                  <option value="menlo,monospace">Menlo</option>
                                  <option value="'ubuntu mono',monospace">Ubuntu Mono</option>
                                  <option value="'dejavu',monospace">Dejavu</option>
                              </select>
                          </div>
                          <div class="form-group">
                              <label class="col-lg-3 control-label" for="font-size-menu">Font size </label>
                              <select id="font-size-menu" class="input-sm preference-menu">
                                  <option value="10">10</option>
                                  <option value="12">12</option>
                                  <option selected value="14">14</option>
                                  <option value="16">16</option>
                                  <option value="18">18</option>
                                  <option value="20">20</option>
                              </select>
                          </div>
                          <div class="form-group">
                              <label class="col-lg-3 control-label" for="tab-size-menu">Tab size </label>
                              <select id="tab-size-menu" class="input-sm preference-menu">
                                  <option value="2">2</option>
                                  <option selected value="4">4</option>
                                  <option value="6">6</option>
                                  <option value="8">8</option>
                              </select>
                          </div>                                            
                          <div class="form-group">
                              <label class="col-lg-3 control-label" for="tab-soft-checkbox">Use soft tabs</label>
                              <input id="tab-soft-checkbox" class="input-sm" checked type="checkbox">
                          </div>
                          <div class="form-group">
                              <label class="col-lg-3 control-label" for="line-wrap-checkbox">Lines</label>
                              <label class="checkbox-inline"><input id="line-wrap-checkbox" checked type="checkbox" class=""> Wrap</label>
                              <label class="checkbox-inline"><input id="line-highlight-checkbox" type="checkbox"> Highlight current</label>
                              <label class="checkbox-inline"><input id="line-numbering-checkbox" checked type="checkbox"> Show numbers</label>
                          </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
            <div id="share" class="modal fade" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">×</button>
                            <h3 id="myModalLabel">Share your program!</h3>
                        </div>
                        <div class="modal-body">
                            <p>Your program is saved to the <span style="color:darkblue">Pengine Scratchpad</span> server for a period of at least one month. A link to it is given below. Copy the link, send it around, do what you want with it. Anyone in possession of the link will be able to access <span style="color:darkblue">Pengine Scratchpad</span> with your document loaded and ready to run.</p>
                            <p>
                                Here is the link: <input style="width:435px;" class="input-sm" type="text" id="url" onclick="this.select()" value="">
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="about" class="modal fade" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">×</button>
                            <h4 id="myModalLabel">About <span style="color:darkblue">Pengine Scratchpad</span><span class="pull-right">Version 0.8&nbsp;&nbsp;</span></h4>
                        </div>
                        <div class="modal-body">
                            <p><span style="color:darkblue">Pengine Scratchpad</span> is part of the Pengine platform.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div id="help" class="modal fade" tabindex="-1">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal">×</button>
                            <h2 id="myModalLabel"><span style="color:darkblue">Pengine Scratchpad</span></h2>
                        </div>
                        <div class="modal-body">
                            <h4>Table of Contents</h4>
                            <ul>
                                <li><a class="stophash" href="#motivation">Motivation</a></li>
                                <li><a class="stophash"  href="#time_limit">Time limit</a></li>
                                <li><a class="stophash"  href="#known_issues">Known issues</a></li>
                                <li><a class="stophash"  href="#technology">Technology</a></li>
                                <li><a class="stophash"  href="#tutorial">Tutorial</a></li>
                                <li><a class="stophash"  href="#license">License</a></li>
                                <li><a class="stophash"  href="#source_code">Source code</a></li>
                            </ul>
                            <h4 id="motivation">Motivation</h4>
                            <p>
                                <span style="color:darkblue">Pengine Scratchpad</span> is inspired by web-based tools such as <a target="_blank" href="http://jsfiddle.net/">JSFIDDLE</a> in that it allows you to develop a program and then share it with others on the Web. However, lacking both debugger and profiler, <span style="color:darkblue">Pengine Scratchpad</span> is far from a full-fledged IDE for Prolog embedded in HTML, and to avoid compromising the server it does not allow you to execute "dangerous" Prolog predicates such as predicates reading and writing files. (It does however allow you to use <code>input/1</code> and <code>output/1</code> but they will only "read" from and "write" to your web browser.) 
                            </p>
                            <p>
                                <span style="color:darkblue">Pengine Scratchpad</span> also serves as a demonstration of the fact that there really is no need for a web-based Prolog application to generate HTML on the server side. See <a href="#technology">Technology</a> for details.
                            </p>
                            <h4 id="time_limit">Time limit</h4>
                            <p>
                                Prolog goals will be allowed to execute on the server for 15 seconds before aborting and returning with a message stating that the time limit has been exceeded. The plan is to increase this limit in the future.
                            </p>
                            <h4 id="known_issues">Known issues</h4>
                            <p>
                            <ul>
                                <li><span style="color:darkblue">Pengine Scratchpad</span> works fine in Safari, Firefox and Chrome. I have not tested it in Internet Explorer, so I don't know if it works there. 
                                </li>
                                <li>
                                    The code determining the permission for executing code on the <span style="color:darkblue">Pengine Scratchpad</span> server takes a white-list approach, using a slightly updated version of Jan's <code>library(sandbox)</code>. If you find predicates that you think could be permitted but are not, please send <a target="_blank" href="mailto:torbjorn.lager@gmail.com">me</a> a message and I will update the list.
                                </li>
                            </ul>
                            </p>
                            <h4 id="technology">Technology</h4>
                            <p>
                                <span style="color:darkblue">Pengine Scratchpad</span> is implemented in a combination of Prolog, HTML, CSS and JavaScript. The only framework used is <a target="_blank" href="http://getbootstrap.com/">Bootstrap</a> and the choice of editor landed on the very capable <a target="_blank" href="http://ace.ajax.org/">ACE editor</a>. The server serves static HTML, CSS and JavaScript code only, none of that is dynamically generated on the server. Instead, to create behaviour, the main traffic between server and client consists of the JSON responses from the server guiding the transformation of the browser's DOM on the client side. To me that looks like the cleanest interface between a server and a client one can hope to get on the web.
                            </p>
                            <p>The server is of course written in SWI-Prolog, using a technique that was explored by Jan and myself a couple of years ago. I have recently been able to extend it to handle not only "backtracking over HTTP" but also <code>input/1</code>-ing from and <code>output/1</code>-ing to the user's browser. Moreover, although it is unlikely to have reached its final form, I have also written a tiny JavaScript wrapper making it <em>much</em> easier to deal with the Prolog web-api. The source code is <a target="_blank" href="/assets/js/pengine.js">here</a>.
                            </p>
                            <h4 id="license">License</h4>
                            <p>
                                <span style="color:darkblue">Pengine Scratchpad</span> may only be distributed using the GNU General Public License. See <a target="_blank" href="http://www.swi-prolog.org/license.html">here</a> for details on SWI-Prolog licensing policies supporting both free and non-free software. 
                            </p>
                            <h4 id="tutorial">Tutorial</h4>
                            <p>
                                A tutorial dealing with the Pengine JavaScript API can be found <a target="_blank" href="/tutorial">here</a> (opens in a new tab or window).
                            </p>
                            <h4 id="source_code">Source code</h4>
                            <p>
                                The source code for <span style="color:darkblue">Pengine Scratchpad</span> is available in the Pengine distribution on <a target="_blank" href="https://github.com/spyderbrain/pengine">GitHub</a>.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Begin page content -->
            <div class="container">
                <pre id="editor"></pre>
                <div id="console">
                    <div id="results">
                        <iframe id="presentation"></iframe>
                    </div>
                </div>
            </div>
        </div>
        <header class="navbar navbar-default navbar-fixed-bottom bs-docs-nav">
      <div class="footer">
        <p class="muted credit">&copy; Torbjörn Lager and <a target="_blank" href="http://spyderbrain.ling.gu.se/">Spyderbrain Technologies</a>, 2013.</p>
      </div>
        </header>
        <!-- Placed at the end of the document so the pages load faster -->
        <script src="/vendor/jquery/jquery-2.0.3.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="/vendor/bootstrap3/js/bootstrap.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="/assets/js/pengine.js" type="text/javascript" charset="utf-8"></script>
        <script src="/vendor/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
        <script src="/apps/scratchpad/js/scratchpad.js" type="text/javascript" charset="utf-8"></script>
    </body>
</html>